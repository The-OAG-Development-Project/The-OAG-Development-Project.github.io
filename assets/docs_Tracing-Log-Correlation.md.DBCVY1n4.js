import{_ as i,c as a,o as t,ah as s}from"./chunks/framework.C9w-46Qr.js";const m=JSON.parse('{"title":"Tracing, Log Correlation","description":"","frontmatter":{},"headers":[],"relativePath":"docs/Tracing-Log-Correlation.md","filePath":"docs/Tracing-Log-Correlation.md"}'),n={name:"docs/Tracing-Log-Correlation.md"};function o(r,e,l,h,d,p){return t(),a("div",null,[...e[0]||(e[0]=[s(`<h1 id="tracing-log-correlation" tabindex="-1">Tracing, Log Correlation <a class="header-anchor" href="#tracing-log-correlation" aria-label="Permalink to “Tracing, Log Correlation”">​</a></h1><p>In this section we explain how you can hook your own trace implementation into the trace subsystem.</p><p>If you need, you can write your own implementation for tracing / log correlation.<br> As a good point to start you may take a look at class <code>...logging.simpleTrace.SimpleTraceContext</code>.</p><h2 id="define-class-and-bean-name" tabindex="-1">Define class and bean name <a class="header-anchor" href="#define-class-and-bean-name" aria-label="Permalink to “Define class and bean name”">​</a></h2><p>Your trace implementation must implement interface <code>...logging.TraceContext</code> and declared to be a named component with prototype scope.<br> The name you provide for the component must then be configured in the master configuration file.<br> Example:</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConfigurableBeanFactory.SCOPE_PROTOTYPE)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyTraceContext</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TraceContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/*...*/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="implement-methods" tabindex="-1">Implement methods <a class="header-anchor" href="#implement-methods" aria-label="Permalink to “Implement methods”">​</a></h2><p>Study the Javadoc of <code>...logging.TraceContext</code> to understand under what conditions the methods are invoked by OAG. Implement them accordingly.<br> If you do not support some of the common configuration settings in the <code>traceProfile</code>:</p><ul><li>Return the value matching the intention of your implementation. E.g. if your implementation does not support upstream trace id communication, make sure you hardcode <code>return false;</code> in the <code>sendTraceResponse</code> method implementation.</li><li>Document this in Javadoc of your class (recommended)</li></ul><h2 id="configure-your-custom-implementation-to-be-used-by-oag" tabindex="-1">Configure your custom implementation to be used by OAG <a class="header-anchor" href="#configure-your-custom-implementation-to-be-used-by-oag" aria-label="Permalink to “Configure your custom implementation to be used by OAG”">​</a></h2><p>The name you provided for the component must be configured in the master configuration file, section <code>traceProfile</code>, attribute <code>type</code> in order to be used by OAG.<br> For the example provided above, the required configuration is:</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">traceProfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">myTraceContext</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # ...</span></span></code></pre></div><h2 id="test-your-implementation" tabindex="-1">Test your implementation <a class="header-anchor" href="#test-your-implementation" aria-label="Permalink to “Test your implementation”">​</a></h2><p>Write tests to verify functionality of your trace implementation. Start OAG and verify your trace id is found in the log and sent to downstream and upstream systems as required.</p>`,14)])])}const k=i(n,[["render",o]]);export{m as __pageData,k as default};
